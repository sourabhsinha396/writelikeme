{% extends "base.html" %}

{% block title %}Style Mimic{% endblock %}

{% block content %}
<header class="text-center py-8 border-b border-gray-200 mb-8">
    <h1 class="text-4xl font-bold text-blue-700 mb-2">Sema GenAI Text Analyzer</h1>
    <p class="text-lg text-gray-600">Upload or paste writing samples and let AI mimic that style</p>
</header>

<div class="bg-white rounded-lg shadow p-6 mb-8">
    <h2 class="text-2xl font-semibold text-gray-700 mb-4">Analyze Writing Style</h2>
    <p class="mb-6">For best results, provide 5-8 samples that represent the writing style you want to mimic.</p>
    
    <div class="mb-8">
        <ul class="flex flex-wrap border-b mb-6">
            <li class="-mb-px mr-2">
                <a href="#upload-tab" class="inline-block py-2 px-4 border-b-2 border-blue-500 font-semibold" id="upload-tab-link">
                    <i class="fas fa-file-upload mr-2"></i>Upload Files
                </a>
            </li>
            <li class="-mb-px mr-2">
                <a href="#paste-tab" class="inline-block py-2 px-4 text-gray-500 hover:text-blue-500" id="paste-tab-link">
                    <i class="fas fa-paste mr-2"></i>Paste Text
                </a>
            </li>
        </ul>
        
        <div id="upload-tab" class="tab-content active">
            <form action="/upload" method="post" enctype="multipart/form-data" class="mb-4">
                <div class="mb-6">
                    <label for="files" class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded cursor-pointer transition duration-200">
                        <i class="fas fa-file-upload mr-2"></i>Select Files
                    </label>
                    <input type="file" id="files" name="files" multiple required accept=".txt,.md,.doc,.docx,.pdf" class="hidden">
                    <p class="mt-2 text-sm text-gray-500">Supports: .txt, .md, .doc, .docx, .pdf</p>
                </div>
                
                <div id="file-list" class="bg-gray-100 rounded p-4 mb-6">
                    <p>No files selected</p>
                </div>
                
                <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded shadow transition duration-200">
                    <i class="fas fa-chart-bar mr-2"></i>Analyze Style
                </button>
            </form>
        </div>
        
        <div id="paste-tab" class="tab-content hidden">
            <form action="/analyze-text" method="post" class="mb-4">
                <div class="mb-6">
                    <label for="sample-name" class="block text-gray-700 font-medium mb-2">Sample Name</label>
                    <input type="text" id="sample-name" name="sample_name" required placeholder="e.g., Blog Post Sample" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <div class="mb-6">
                    <label for="sample-text" class="block text-gray-700 font-medium mb-2">Paste Your Text</label>
                    <textarea id="sample-text" name="sample_text" rows="10" required placeholder="Paste a sample of writing here..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                </div>
                
                <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded shadow transition duration-200">
                    <i class="fas fa-chart-bar mr-2"></i>Analyze Style
                </button>
            </form>
        </div>
    </div>
</div>

<div class="bg-white rounded-lg shadow p-6">
    <h2 class="text-2xl font-semibold text-gray-700 mb-4">How It Works</h2>
    <ol class="space-y-4 ml-6 list-decimal">
        <li class="pl-2"><span class="font-medium">Provide Samples</span> - Upload files or paste text samples of the writing style you want to mimic</li>
        <li class="pl-2"><span class="font-medium">AI Analysis</span> - Our system analyzes the unique patterns and characteristics of the writing</li>
        <li class="pl-2"><span class="font-medium">Generate Content</span> - Write new content in the same style on any topic you choose</li>
    </ol>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Tab switching functionality
    document.getElementById('upload-tab-link').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('upload-tab');
        this.classList.add('border-b-2', 'border-blue-500', 'font-semibold');
        this.classList.remove('text-gray-500');
        document.getElementById('paste-tab-link').classList.remove('border-b-2', 'border-blue-500', 'font-semibold');
        document.getElementById('paste-tab-link').classList.add('text-gray-500');
    });
    
    document.getElementById('paste-tab-link').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('paste-tab');
        this.classList.add('border-b-2', 'border-blue-500', 'font-semibold');
        this.classList.remove('text-gray-500');
        document.getElementById('upload-tab-link').classList.remove('border-b-2', 'border-blue-500', 'font-semibold');
        document.getElementById('upload-tab-link').classList.add('text-gray-500');
    });
    
    function showTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(tab => {
            tab.classList.add('hidden');
        });
        document.getElementById(tabId).classList.remove('hidden');
    }

    // Display selected files
    document.getElementById('files').addEventListener('change', function(e) {
        const fileList = document.getElementById('file-list');
        
        if (this.files.length > 0) {
            let html = '<ul class="space-y-2">';
            for (let i = 0; i < this.files.length; i++) {
                html += `<li class="border-b border-gray-200 pb-2">
                    <i class="fas fa-file-alt mr-2"></i>${this.files[i].name} (${(this.files[i].size / 1024).toFixed(1)} KB)
                </li>`;
            }
            html += '</ul>';
            fileList.innerHTML = html;
        } else {
            fileList.innerHTML = '<p>No files selected</p>';
        }
    });
</script>
{% endblock %}